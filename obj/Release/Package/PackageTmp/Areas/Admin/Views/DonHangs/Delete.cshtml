@model Wine_e_commerce.Models.DonHang

@{
    ViewBag.Title = "Delete";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}

<main id="main" class="main">
    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <!-- Table with stripped rows -->
                        <h3>Bạn có chắc chắn xóa đơn hàng này không?</h3>
                        <div>
                            <hr />
                            <dl class="dl-horizontal">
                                <dt>
                                    @Html.DisplayNameFor(model => model.PhuongThucThanhToan)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.PhuongThucThanhToan)
                                </dd>

                                <dt>
                                    @Html.DisplayNameFor(model => model.TongSanPham)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.TongSanPham)
                                </dd>

                                <dt>
                                    @Html.DisplayNameFor(model => model.DiaChiNhanHang)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.DiaChiNhanHang)
                                </dd>

                                <dt>
                                    @Html.DisplayNameFor(model => model.TongTien)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.TongTien)
                                </dd>

                                <dt>
                                    @Html.DisplayNameFor(model => model.ngayDat)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.ngayDat)
                                </dd>

                                <dt>
                                    @Html.DisplayNameFor(model => model.KhachHang.TenKhachHang)
                                </dt>

                                <dd>
                                    @Html.DisplayFor(model => model.KhachHang.TenKhachHang)
                                </dd>

                            </dl>

                            @using (Html.BeginForm("HandleDelete", "DonHangs", FormMethod.Post, new { id = "DeleteForm" }))
                            {

                                <div class="form-actions no-color">
                                    <button class="btn btn-primary my-3" type="submit">Xóa</button>
                                    @Html.ActionLink("|  Quay lại", "Index")
                                </div>
                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10">
                                        <p style="color: red; font-size: 18px; font-weight: bold" id="error-meg"></p>
                                        <p style="color: green; font-size: 18px; font-weight: bold" id="success-meg"></p>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
@*@section scripts{
    <script src="~/Scripts/jquery-3.7.1.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script>
        $(document).ready(() => {
            $("#DeleteForm").on("submit", (event) => {
                event.preventDefault();
                var inputAjax = {
                    type: "POST",
                    url: '@Url.Action("HandleDelete", "DonHangs", new {id = Model.MaDonHang})',
                    dataType: "Json",
                    contentType: false,
                    processData: false,
                    success: (res) => {
                        if (res.status == true) {
                            $("#error-meg").html("");
                            $("#success-meg").html("Xóa đơn hàng thành công");
                            setTimeout(() => {
                                window.location.href = "/Admin/DonHangs"
                            }, 400);
                        }
                        else {
                            $("#error-meg").html(res.error);
                        }
                    },
                    error: (res) => {
                        $("#error-meg").html(res.error);
                    }
                };
                $.ajax(inputAjax);
            });
        });
    </script>
}*@

